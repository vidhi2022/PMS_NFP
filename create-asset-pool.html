<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Create Asset Pool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
<div class="container py-5">
  <h2 class="text-center mb-4">Create Pool of Assets</h2>

  <!-- Road Info -->
  <div class="row g-3 mb-4">
    <div class="col-md-6">
      <label class="form-label">Proposed Road Name</label>
      <input type="text" name="road_name" class="form-control" />
    </div>
    <div class="col-md-6">
      <label class="form-label">Proposed Road Length (km)</label>
      <input type="number" name="road_length" step="0.01" class="form-control" />
    </div>
    <div class="col-md-6">
      <label class="form-label">Upload Shapefile (.shp)</label>
      <input type="file" name="shapefile" accept=".shp" class="form-control" />
    </div>
  </div>

  <!-- Culverts Section -->
  <div class="border p-3 mb-4 rounded">
    <h5>Proposed Culverts</h5>
    <div class="row g-3 align-items-end">
      <div class="col-md-4">
        <label class="form-label">Culvert Name</label>
        <input type="text" id="culvertName" class="form-control" />
      </div>
      <div class="col-md-4">
        <label class="form-label">Culvert Type</label>
        <select id="culvertType" class="form-select">
          <option value="">-- Select Type --</option>
          <option value="Box">Box</option>
          <option value="Pipe">Pipe</option>
          <option value="Arch">Arch</option>
        </select>
      </div>
      <div class="col-md-3">
        <label class="form-label">Span (m)</label>
        <input type="number" id="culvertSpan" class="form-control" />
      </div>
      <div class="col-md-1">
        <button type="button" id="addCulvertBtn" class="btn btn-success w-100">➕</button>
      </div>
    </div>

    <div class="table-responsive mt-3">
      <table class="table table-bordered" id="culvertTable">
        <thead class="table-light">
          <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Span</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- Bridges Section -->
  <div class="border p-3 mb-4 rounded">
    <h5>Proposed Bridges</h5>
    <div class="row g-3 align-items-end">
      <div class="col-md-4">
        <label class="form-label">Bridge Name</label>
        <input type="text" id="bridgeName" class="form-control" />
      </div>
      <div class="col-md-4">
        <label class="form-label">Bridge Type</label>
        <select id="bridgeType" class="form-select">
          <option value="">-- Select Type --</option>
          <option value="Suspension">Suspension</option>
          <option value="Beam">Beam</option>
          <option value="Truss">Truss</option>
        </select>
      </div>
      <div class="col-md-3">
        <label class="form-label">Span (m)</label>
        <input type="number" id="bridgeSpan" class="form-control" />
      </div>
      <div class="col-md-1">
        <button type="button" id="addBridgeBtn" class="btn btn-success w-100">➕</button>
      </div>
    </div>

    <div class="table-responsive mt-3">
      <table class="table table-bordered" id="bridgeTable">
        <thead class="table-light">
          <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Span</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- Walls Section -->
  <div class="border p-3 mb-4 rounded">
    <h5>Proposed Retaining Walls</h5>
    <div class="row g-3 align-items-end">
      <div class="col-md-4">
        <label class="form-label">Wall Name</label>
        <input type="text" id="wallName" class="form-control" />
      </div>
      <div class="col-md-4">
        <label class="form-label">Wall Type</label>
        <select id="wallType" class="form-select">
          <option value="">-- Select Type --</option>
          <option value="Gravity">Gravity</option>
          <option value="Cantilever">Cantilever</option>
          <option value="Anchored">Anchored</option>
        </select>
      </div>
      <div class="col-md-3">
        <label class="form-label">Length (m)</label>
        <input type="number" id="wallLength" class="form-control" />
      </div>
      <div class="col-md-1">
        <button type="button" id="addWallBtn" class="btn btn-success w-100">➕</button>
      </div>
    </div>

    <div class="table-responsive mt-3">
      <table class="table table-bordered" id="wallTable">
        <thead class="table-light">
          <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Length</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <div class="text-center">
	<form action ="success_asset_pool.html">
		<a href="index.html" class="btn btn-secondary">⬅ Back</a>
		<button class="btn btn-primary" type="submit">Save Asset Pool</button>
	</form>
  </div>
</div>

<!-- JavaScript for dynamic tables -->
<script>
  function addRow(tableId, inputs, namePrefix) {
    const tbody = document.querySelector(`#${tableId} tbody`);
    const values = inputs.map(input => input.value.trim());
    if (values.some(v => !v)) {
      alert("Please fill all fields.");
      return;
    }

    const tr = document.createElement("tr");
    tr.innerHTML = values.map((val, i) =>
      `<td><input type="hidden" name="${namePrefix}[${i}][]" value="${val}">${val}</td>`
    ).join("") + `<td><button type="button" class="btn btn-sm btn-danger deleteRowBtn">Delete</button></td>`;
    tbody.appendChild(tr);
    inputs.forEach(i => i.value = "");
  }

  document.getElementById("addCulvertBtn").onclick = () =>
    addRow("culvertTable", [culvertName, culvertType, culvertSpan], "culvert");

  document.getElementById("addBridgeBtn").onclick = () =>
    addRow("bridgeTable", [bridgeName, bridgeType, bridgeSpan], "bridge");

  document.getElementById("addWallBtn").onclick = () =>
    addRow("wallTable", [wallName, wallType, wallLength], "wall");

  document.querySelectorAll("tbody").forEach(tbody =>
    tbody.addEventListener("click", e => {
      if (e.target.classList.contains("deleteRowBtn")) {
        e.target.closest("tr").remove();
      }
    })
  );
</script>
</body>
</html>
